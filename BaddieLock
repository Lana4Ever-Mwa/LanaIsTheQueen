local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

local shootingEnabled = true  -- Toggle variable to enable/disable shooting
local radius = 80  -- Set the shooting radius

local function createCircle()
    -- Create a ScreenGui
    local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))

    -- Create a Frame for the outline
    local circle = Instance.new("Frame", screenGui)
    circle.Size = UDim2.new(0, 100, 0, 100)  -- Size of the circle (diameter 100 pixels)
    circle.Position = UDim2.new(0.5, 0, 0.5, 0)  -- Centered circle
    circle.BackgroundTransparency = 1  -- Fully transparent background
    circle.BorderSizePixel = 0  -- No border

    -- Create a UICorner for rounded edges
    local uiCorner = Instance.new("UICorner", circle)
    uiCorner.CornerRadius = UDim.new(0.5, 0)  -- Make it a circle

    -- Create an outline using a UIStroke
    local uiStroke = Instance.new("UIStroke", circle)
    uiStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  -- Apply the stroke to the border
    uiStroke.Color = Color3.fromRGB(135, 206, 250)  -- Sky blue color for the outline
    uiStroke.Thickness = 2  -- Thickness of the outline

    return circle
end

local function isPlayerInCircle(player, center, radius)
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local head = character:FindFirstChild("Head")
        local humanoidRootPart = character.HumanoidRootPart
        if head and humanoidRootPart then
            local headPosition = humanoidRootPart.Position
            local distance = (headPosition - center).magnitude
            return distance <= radius
        end
    end
    return false
end

local function shootAt(player)
    -- Your shooting logic here
    print("Guaranteed hit on", player.Name)
end

local function shootNearbyPlayers(radius)
    local center = LocalPlayer.Character.HumanoidRootPart.Position  -- Use player's position
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and isPlayerInCircle(player, center, radius) then
            shootAt(player)  -- Automatically "hit" every player in the circle
        end
    end
end

-- Create an outline circle in the middle of the screen
local circle = createCircle()

-- Function to toggle shooting on and off
local function toggleShooting()
    shootingEnabled = not shootingEnabled  -- Toggle the boolean value
    print("Shooting enabled:", shootingEnabled)

    if shootingEnabled then
        shootNearbyPlayers(radius)  -- Shoot if enabled
    end
end

-- Connect the toggle function to touch input
circle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        toggleShooting()  -- Toggle shooting on touch
    end
end)
